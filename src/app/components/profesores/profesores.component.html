
<div class="bg-white dark:bg-gray-900 rounded-lg shadow p-4">
	<div class="flex items-center justify-between mb-4">
		<h2 class="text-xl font-bold text-primary">Listado de Profesores</h2>
		<button pButton type="button" icon="pi pi-plus" label="Nuevo" class="!bg-primary !border-primary !text-white" (click)="openNew()"></button>
	</div>
	<p-table
		[value]="profesores()"
		dataKey="id"
		class="p-datatable-sm"
		[tableStyle]="{ 'min-width': '100%' }"
		[responsiveLayout]="'scroll'"
	>
		<ng-template pTemplate="header">
			<tr>
				<th>Nombre</th>
				<th>Especialidad</th>
				<th>Cursos Asignados</th>
				<th>Experiencia (años)</th>
				<th>Estado</th>
				<th class="w-32 text-center">Acciones</th>
			</tr>
		</ng-template>
		<ng-template pTemplate="body" let-profesor>
			<tr>
				<td class="font-medium">{{ profesor.nombre }}</td>
				<td>{{ profesor.especialidad }}</td>
				<td class="text-center">{{ profesor.cursosAsignados }}</td>
				<td class="text-center">{{ profesor.experiencia }}</td>
				<td>
					<span
						class="inline-block w-3 h-3 rounded-full mr-2"
						[ngClass]="profesor.activo ? 'bg-green-500' : 'bg-gray-400'"
						aria-label="{{ profesor.activo ? 'Activo' : 'Inactivo' }}"
					></span>
					<span class="text-xs font-medium" [ngClass]="profesor.activo ? 'text-green-700' : 'text-gray-500'">
						{{ profesor.activo ? 'Activo' : 'Inactivo' }}
					</span>
				</td>
				<td class="flex gap-2 justify-center">
					<button pButton type="button" icon="pi pi-pencil" class="p-1 !text-primary" (click)="editProfesor(profesor)" aria-label="Editar" pTooltip="Editar profesor" tooltipPosition="top"></button>
					<button pButton type="button" icon="pi pi-trash" class="p-1 !text-red-600" (click)="deleteProfesor(profesor)" aria-label="Eliminar" pTooltip="Eliminar profesor" tooltipPosition="top"></button>
				</td>
			</tr>
		</ng-template>
		<ng-template pTemplate="emptymessage">
			<tr>
				<td colspan="6" class="text-center text-gray-400">No hay profesores disponibles.</td>
			</tr>
		</ng-template>
	</p-table>

	<!-- Dialogo para agregar/editar -->
	<p-dialog
		[(visible)]="dialogVisible"
		[modal]="true"
		[closable]="true"
		[dismissableMask]="true"
		[style]="{ width: '90vw', maxWidth: '400px' }"
		[header]="editMode ? 'Editar Profesor' : 'Nuevo Profesor'"
		(onHide)="closeDialog()"
	>
		<form [formGroup]="profesorForm" (ngSubmit)="saveProfesor()" class="flex flex-col gap-4">
			<div>
				<label class="block mb-1 font-medium">Nombre</label>
				<input pInputText formControlName="nombre" class="w-full" required />
			</div>
			<div>
				<label class="block mb-1 font-medium">Especialidad</label>
				<input pInputText formControlName="especialidad" class="w-full" required />
			</div>
			<div>
				<label class="block mb-1 font-medium">Cursos Asignados</label>
				<input pInputNumber formControlName="cursosAsignados" class="w-full" [min]="0" />
			</div>
			<div>
				<label class="block mb-1 font-medium">Experiencia (años)</label>
				<input pInputNumber formControlName="experiencia" class="w-full" [min]="0" />
			</div>
			<div>
				<label class="block mb-1 font-medium">Estado</label>
				<p-select
					[options]="estados"
					optionLabel="label"
					optionValue="value"
					formControlName="activo"
					placeholder="Selecciona estado"
					class="w-full"
				></p-select>
			</div>
			<div class="flex justify-end gap-2 mt-2">
				<button pButton type="button" label="Cancelar" class="p-button-text" (click)="closeDialog()"></button>
				<button pButton type="submit" label="Guardar" [disabled]="profesorForm.invalid" class="!bg-primary !border-primary !text-white"></button>
			</div>
		</form>
	</p-dialog>
</div>
